<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrafficMask Panel - –†–æ—Å—Å–∏–π—Å–∫–∞—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --info-color: #0dcaf0;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 1400px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stats-card h3 {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0;
        }
        
        .stats-card p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        
        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--primary-color);
        }
        
        .feature-card h5 {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .btn-russia {
            background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-russia:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .nav-tabs .nav-link {
            border: none;
            color: var(--secondary-color);
            font-weight: bold;
            padding: 15px 25px;
        }
        
        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        .table-russia {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .table-russia thead {
            background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
            color: white;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-online { background-color: var(--success-color); }
        .status-offline { background-color: var(--danger-color); }
        .status-warning { background-color: var(--warning-color); }
        
        .russia-flag {
            background: linear-gradient(to right, #ffffff 33%, #0039a6 33%, #0039a6 66%, #d52b1e 66%);
            width: 20px;
            height: 15px;
            border-radius: 2px;
            display: inline-block;
            margin-right: 8px;
        }
        
        .log-container {
            background: #1e1e1e;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 20px;
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .progress-russia {
            height: 25px;
            border-radius: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
        }
        
        .progress-russia .progress-bar {
            background: linear-gradient(135deg, var(--success-color), var(--info-color));
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="main-container">
            <!-- Header -->
            <div class="header text-center">
                <h1><i class="fas fa-shield-alt"></i> TrafficMask Panel</h1>
                <p class="mb-0">–†–æ—Å—Å–∏–π—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ | VLESS + REALITY + Vision</p>
                <div class="mt-3">
                    <span class="russia-flag"></span>
                    <span class="badge bg-light text-dark me-2">üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è</span>
                    <span class="badge bg-light text-dark me-2">üöÄ VLESS –ø—Ä–æ—Ç–æ–∫–æ–ª</span>
                    <span class="badge bg-light text-dark me-2">üîí REALITY –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞</span>
                    <span class="badge bg-light text-dark">üëÅÔ∏è Vision –ø–æ—Ç–æ–∫</span>
                </div>
            </div>

            <!-- Statistics -->
            <div class="row p-4">
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h3 id="processed-packets">0</h3>
                        <p><i class="fas fa-network-wired"></i> –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h3 id="masked-packets">0</h3>
                        <p><i class="fas fa-mask"></i> –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h3 id="active-connections">0</h3>
                        <p><i class="fas fa-link"></i> –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h3 id="signature-count">0</h3>
                        <p><i class="fas fa-signature"></i> –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="px-4">
                <ul class="nav nav-tabs" id="mainTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">
                            <i class="fas fa-tachometer-alt"></i> –û–±–∑–æ—Ä
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="vless-tab" data-bs-toggle="tab" data-bs-target="#vless" type="button" role="tab">
                            <i class="fas fa-rocket"></i> VLESS
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="reality-tab" data-bs-toggle="tab" data-bs-target="#reality" type="button" role="tab">
                            <i class="fas fa-lock"></i> REALITY
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="russia-tab" data-bs-toggle="tab" data-bs-target="#russia" type="button" role="tab">
                            <i class="fas fa-flag"></i> –†–æ—Å—Å–∏—è
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="logs-tab" data-bs-toggle="tab" data-bs-target="#logs" type="button" role="tab">
                            <i class="fas fa-file-alt"></i> –õ–æ–≥–∏
                        </button>
                    </li>
                </ul>
            </div>

            <!-- Tab Content -->
            <div class="tab-content p-4" id="mainTabsContent">
                <!-- Overview Tab -->
                <div class="tab-pane fade show active" id="overview" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-shield-alt"></i> –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h5>
                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>VLESS –ø—Ä–æ—Ç–æ–∫–æ–ª</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–†–∞–±–æ—Ç–∞–µ—Ç</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>REALITY –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>–†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–î–æ—Å—Ç—É–ø–Ω—ã</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-chart-line"></i> –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h5>
                                <div class="mt-3">
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–µ—Ç–æ–≤</span>
                                            <span id="packet-performance">0 –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ VLESS</span>
                                            <span id="vless-performance">0 –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 92%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>REALITY –æ–±—Ä–∞–±–æ—Ç–∫–∞</span>
                                            <span id="reality-performance">0 –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 78%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VLESS Tab -->
                <div class="tab-pane fade" id="vless" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="feature-card">
                                <h5><i class="fas fa-rocket"></i> VLESS –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h5>
                                <div class="table-responsive">
                                    <table class="table table-russia">
                                        <thead>
                                            <tr>
                                                <th>UUID</th>
                                                <th>–î–æ–º–µ–Ω</th>
                                                <th>–ü–æ—Ä—Ç</th>
                                                <th>–¢–∏–ø</th>
                                                <th>–°—Ç–∞—Ç—É—Å</th>
                                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                            </tr>
                                        </thead>
                                        <tbody id="vless-configs">
                                            <tr>
                                                <td><code>550e8400-e29b-41d4-a716-446655440001</code></td>
                                                <td><span class="russia-flag"></span>mail.ru</td>
                                                <td>443</td>
                                                <td><span class="badge bg-primary">TCP</span></td>
                                                <td><span class="status-indicator status-online"></span>–ê–∫—Ç–∏–≤–µ–Ω</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                                                    <button class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><code>550e8400-e29b-41d4-a716-446655440002</code></td>
                                                <td><span class="russia-flag"></span>yandex.ru</td>
                                                <td>443</td>
                                                <td><span class="badge bg-success">REALITY</span></td>
                                                <td><span class="status-indicator status-online"></span>–ê–∫—Ç–∏–≤–µ–Ω</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                                                    <button class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><code>550e8400-e29b-41d4-a716-446655440003</code></td>
                                                <td><span class="russia-flag"></span>vk.com</td>
                                                <td>443</td>
                                                <td><span class="badge bg-info">Vision</span></td>
                                                <td><span class="status-indicator status-online"></span>–ê–∫—Ç–∏–≤–µ–Ω</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                                                    <button class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-3">
                                    <button class="btn btn-russia" onclick="addVlessConfig()">
                                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å VLESS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-card">
                                <h5><i class="fas fa-cogs"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-russia" onclick="startVless()">
                                        <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å VLESS
                                    </button>
                                    <button class="btn btn-outline-danger" onclick="stopVless()">
                                        <i class="fas fa-stop"></i> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VLESS
                                    </button>
                                    <button class="btn btn-outline-info" onclick="restartVless()">
                                        <i class="fas fa-redo"></i> –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å VLESS
                                    </button>
                                    <button class="btn btn-outline-success" onclick="testVless()">
                                        <i class="fas fa-vial"></i> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- REALITY Tab -->
                <div class="tab-pane fade" id="reality" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-lock"></i> REALITY –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h5>
                                <form id="reality-form">
                                    <div class="mb-3">
                                        <label class="form-label">–¶–µ–ª–µ–≤–æ–π –¥–æ–º–µ–Ω</label>
                                        <select class="form-select" id="reality-domain">
                                            <option value="mail.ru">mail.ru</option>
                                            <option value="yandex.ru">yandex.ru</option>
                                            <option value="vk.com">vk.com</option>
                                            <option value="ok.ru">ok.ru</option>
                                            <option value="rambler.ru">rambler.ru</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á</label>
                                        <input type="text" class="form-control" id="reality-pbk" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">–°–µ—Å—Å–∏–æ–Ω–Ω—ã–π ID</label>
                                        <input type="text" class="form-control" id="reality-sid" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">–ü—É—Ç—å</label>
                                        <input type="text" class="form-control" id="reality-spx" value="/">
                                    </div>
                                    <button type="submit" class="btn btn-russia">
                                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å REALITY
                                    </button>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-shield-alt"></i> REALITY –°—Ç–∞—Ç—É—Å</h5>
                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>REALITY —Å–µ—Ä–≤–µ—Ä</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>TLS –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–†–∞–±–æ—Ç–∞–µ—Ç</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>–†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã</span>
                                        <span class="status-indicator status-online"></span>
                                        <span class="badge bg-success">–î–æ—Å—Ç—É–ø–Ω—ã</span>
                                    </div>
                                    <div class="mt-4">
                                        <h6>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ REALITY:</h6>
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-between">
                                                <span>–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤</span>
                                                <span id="reality-packets">0</span>
                                            </div>
                                            <div class="progress progress-russia mt-1">
                                                <div class="progress-bar" role="progressbar" style="width: 78%"></div>
                                            </div>
                                        </div>
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-between">
                                                <span>–£—Å–ø–µ—à–Ω–∞—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞</span>
                                                <span id="reality-success">0%</span>
                                            </div>
                                            <div class="progress progress-russia mt-1">
                                                <div class="progress-bar" role="progressbar" style="width: 95%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Russia Tab -->
                <div class="tab-pane fade" id="russia" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-flag"></i> –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã</h5>
                                <div class="table-responsive">
                                    <table class="table table-russia">
                                        <thead>
                                            <tr>
                                                <th>–°–µ—Ä–≤–∏—Å</th>
                                                <th>–°—Ç–∞—Ç—É—Å</th>
                                                <th>IP –∞–¥—Ä–µ—Å</th>
                                                <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="russia-flag"></span>–Ø–Ω–¥–µ–∫—Å DNS</td>
                                                <td><span class="status-indicator status-online"></span>–û–Ω–ª–∞–π–Ω</td>
                                                <td><code>77.88.8.8</code></td>
                                                <td><span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–æ</span></td>
                                            </tr>
                                            <tr>
                                                <td><span class="russia-flag"></span>Mail.ru</td>
                                                <td><span class="status-indicator status-online"></span>–û–Ω–ª–∞–π–Ω</td>
                                                <td><code>13.13.13.13</code></td>
                                                <td><span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–æ</span></td>
                                            </tr>
                                            <tr>
                                                <td><span class="russia-flag"></span>Rambler</td>
                                                <td><span class="status-indicator status-online"></span>–û–Ω–ª–∞–π–Ω</td>
                                                <td><code>46.46.46.46</code></td>
                                                <td><span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–æ</span></td>
                                            </tr>
                                            <tr>
                                                <td><span class="russia-flag"></span>VK</td>
                                                <td><span class="status-indicator status-online"></span>–û–Ω–ª–∞–π–Ω</td>
                                                <td><code>31.31.31.31</code></td>
                                                <td><span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–æ</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-chart-pie"></i> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</h5>
                                <div class="mt-3">
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>–Ø–Ω–¥–µ–∫—Å —Å–µ—Ä–≤–∏—Å—ã</span>
                                            <span>35%</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 35%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Mail.ru —Å–µ—Ä–≤–∏—Å—ã</span>
                                            <span>25%</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 25%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>VK —Å–µ—Ä–≤–∏—Å—ã</span>
                                            <span>20%</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 20%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>–î—Ä—É–≥–∏–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ</span>
                                            <span>20%</span>
                                        </div>
                                        <div class="progress progress-russia mt-1">
                                            <div class="progress-bar" role="progressbar" style="width: 20%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logs Tab -->
                <div class="tab-pane fade" id="logs" role="tabpanel">
                    <div class="feature-card">
                        <h5><i class="fas fa-file-alt"></i> –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</h5>
                        <div class="log-container" id="log-container">
                            <div>[2024-01-15 10:30:15] INFO: TrafficMask —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞</div>
                            <div>[2024-01-15 10:30:16] INFO: VLESS –º–∞—Å–∫–∏—Ä–æ–≤—â–∏–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω</div>
                            <div>[2024-01-15 10:30:17] INFO: REALITY –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞</div>
                            <div>[2024-01-15 10:30:18] INFO: –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã</div>
                            <div>[2024-01-15 10:30:19] INFO: –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤: 1250</div>
                            <div>[2024-01-15 10:30:20] INFO: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤: 1180</div>
                            <div>[2024-01-15 10:30:21] INFO: VLESS UUID –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π</div>
                            <div>[2024-01-15 10:30:22] INFO: REALITY –¥–æ–º–µ–Ω –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ mail.ru</div>
                            <div>[2024-01-15 10:30:23] INFO: Vision –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω</div>
                            <div>[2024-01-15 10:30:24] INFO: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞</div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-outline-primary me-2" onclick="clearLogs()">
                                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
                            </button>
                            <button class="btn btn-outline-success" onclick="downloadLogs()">
                                <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- === VLESS/Reality Config Generator === -->
    <div class="container my-4">
      <div class="card">
        <div class="card-header bg-primary text-white">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä VPN-–∫–æ–Ω—Ñ–∏–≥–∞ (VLESS/Reality/Custom)</div>
        <div class="card-body">
          <form id="vless-config-form" class="row g-3">
            <div class="col-md-3">
              <label for="sni-input" class="form-label">SNI</label>
              <input type="text" class="form-control" id="sni-input" placeholder="example.com">
            </div>
            <div class="col-md-3">
              <label for="uuid-input" class="form-label">UUID</label>
              <input type="text" class="form-control" id="uuid-input" placeholder="550e8400-e29b-41d4-a716-446655440001">
            </div>
            <div class="col-md-2">
              <label for="alpn-input" class="form-label">ALPN</label>
              <input type="text" class="form-control" id="alpn-input" placeholder="h2,http/1.1">
            </div>
            <div class="col-md-2">
              <label for="path-input" class="form-label">Path</label>
              <input type="text" class="form-control" id="path-input" placeholder="/ws">
            </div>
            <div class="col-md-2 d-flex align-items-end">
              <button type="button" class="btn btn-success w-100" onclick="generateConfig()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
          </form>
          <div class="mt-3">
            <label class="form-label">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:</label>
            <pre id="config-output" class="bg-light p-2 rounded"></pre>
            <button class="btn btn-outline-primary btn-sm" onclick="copyConfig()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
    <!-- === End Config Generator === -->

    <!-- === Real-time Allowed IPs and Logs === -->
    <div class="container my-4">
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-info text-white">–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ IP (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)</div>
            <div class="card-body">
              <table class="table table-bordered table-sm" id="allowed-ips-table">
                <thead><tr><th>–°–µ—Ä–≤–∏—Å</th><th>IP</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-secondary text-white">–õ–æ–≥–∏ (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)</div>
            <div class="card-body" style="max-height:200px;overflow-y:auto;">
              <ul class="list-group" id="logs-list"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- === End Real-time Tables === -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // API –±–∞–∑–æ–≤—ã–π URL
        const API_BASE = 'http://localhost:8080/api/v1';
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            fetch(`${API_BASE}/stats`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('processed-packets').textContent = data.processed_packets || 0;
                    document.getElementById('masked-packets').textContent = data.masked_packets || 0;
                    document.getElementById('active-connections').textContent = data.active_connections || 0;
                    document.getElementById('signature-count').textContent = data.signature_count || 0;
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                    document.getElementById('packet-performance').textContent = `${data.processed_packets || 0} –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫`;
                    document.getElementById('vless-performance').textContent = `${Math.floor((data.processed_packets || 0) * 0.92)} –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫`;
                    document.getElementById('reality-performance').textContent = `${Math.floor((data.processed_packets || 0) * 0.78)} –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫`;
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ REALITY —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                    document.getElementById('reality-packets').textContent = Math.floor((data.processed_packets || 0) * 0.78);
                    document.getElementById('reality-success').textContent = '95%';
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
                });
        }
        
        // VLESS —Ñ—É–Ω–∫—Ü–∏–∏
        function addVlessConfig() {
            alert('–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π VLESS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...');
        }
        
        function startVless() {
            fetch(`${API_BASE}/vless/start`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    alert('VLESS —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω');
                    addLog('VLESS —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω');
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ VLESS:', error);
                });
        }
        
        function stopVless() {
            fetch(`${API_BASE}/vless/stop`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    alert('VLESS —Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
                    addLog('VLESS —Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ VLESS:', error);
                });
        }
        
        function restartVless() {
            fetch(`${API_BASE}/vless/restart`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    alert('VLESS —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω');
                    addLog('VLESS —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω');
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ VLESS:', error);
                });
        }
        
        function testVless() {
            fetch(`${API_BASE}/vless/test`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    alert('–¢–µ—Å—Ç VLESS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                    addLog('–¢–µ—Å—Ç VLESS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è VLESS:', error);
                });
        }
        
        // REALITY —Ñ—É–Ω–∫—Ü–∏–∏
        document.getElementById('reality-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                domain: document.getElementById('reality-domain').value,
                pbk: document.getElementById('reality-pbk').value,
                sid: document.getElementById('reality-sid').value,
                spx: document.getElementById('reality-spx').value
            };
            
            fetch(`${API_BASE}/reality/save`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                alert('REALITY –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                addLog(`REALITY –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞: ${formData.domain}`);
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è REALITY:', error);
            });
        });
        
        // –õ–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏
        function addLog(message) {
            const logContainer = document.getElementById('log-container');
            const timestamp = new Date().toISOString().replace('T', ' ').substring(0, 19);
            const logEntry = document.createElement('div');
            logEntry.textContent = `[${timestamp}] INFO: ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        function clearLogs() {
            document.getElementById('log-container').innerHTML = '';
            addLog('–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã');
        }
        
        function downloadLogs() {
            const logs = document.getElementById('log-container').textContent;
            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `trafficmask-logs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        setInterval(updateStats, 5000);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            addLog('TrafficMask Panel –∑–∞–≥—Ä—É–∂–µ–Ω');
        });

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
        function generateConfig() {
          const sni = document.getElementById('sni-input').value;
          const uuid = document.getElementById('uuid-input').value;
          const alpn = document.getElementById('alpn-input').value;
          const path = document.getElementById('path-input').value;
          const config = `vless://${uuid}@yourdomain.com:443?encryption=none&security=tls&sni=${sni}&alpn=${alpn}&type=ws&path=${path}#MyProfile`;
          document.getElementById('config-output').textContent = config;
        }
        function copyConfig() {
          const text = document.getElementById('config-output').textContent;
          navigator.clipboard.writeText(text);
        }
        // WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
        let ws;
        function connectWS() {
          ws = new WebSocket((location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host + '/api/v1/ws');
          ws.onmessage = function(event) {
            const data = JSON.parse(event.data);
            if (data.type === 'allowed_ips') updateAllowedIpsTable(data.data);
            if (data.type === 'logs') updateLogsList(data.data);
          };
          ws.onclose = function() { setTimeout(connectWS, 2000); };
        }
        function updateAllowedIpsTable(ips) {
          const tbody = document.querySelector('#allowed-ips-table tbody');
          tbody.innerHTML = '';
          ips.forEach(ip => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${ip.Name}</td><td>${ip.IP}</td><td>${ip.Status}</td>`;
            tbody.appendChild(tr);
          });
        }
        function updateLogsList(logs) {
          const ul = document.getElementById('logs-list');
          ul.innerHTML = '';
          logs.slice(-30).reverse().forEach(log => {
            const li = document.createElement('li');
            li.className = 'list-group-item';
            li.textContent = `[${log.Timestamp}] ${log.Level}: ${log.Message}`;
            ul.appendChild(li);
          });
        }
        document.addEventListener('DOMContentLoaded', connectWS);
    </script>
</body>
</html>
